<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Watena: UserConnectionProvider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Watena
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_user_connection_provider-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">UserConnectionProvider Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for UserConnectionProvider:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_user_connection_provider.png" usemap="#UserConnectionProvider_map" alt=""/>
  <map id="UserConnectionProvider_map" name="UserConnectionProvider_map">
<area href="class_provider_facebook.html" alt="ProviderFacebook" shape="rect" coords="0,56,151,80"/>
<area href="class_provider_twitter.html" alt="ProviderTwitter" shape="rect" coords="161,56,312,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a44ddc4806292a57a3d46267f85fcb8b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a44ddc4806292a57a3d46267f85fcb8b2">getName</a> ()</td></tr>
<tr class="separator:a44ddc4806292a57a3d46267f85fcb8b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba8b5a529e6f20c8b243368862120b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a8ba8b5a529e6f20c8b243368862120b8">update</a> (<a class="el" href="class_user.html">User</a> $oUser, $bForceOverwrite=false)</td></tr>
<tr class="separator:a8ba8b5a529e6f20c8b243368862120b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d2c9bb70f491f514b7c16c558f0777"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#ab1d2c9bb70f491f514b7c16c558f0777">getConnectionId</a> ()</td></tr>
<tr class="separator:ab1d2c9bb70f491f514b7c16c558f0777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51cc299a8ba01d2a7d2a26b146cedc08"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a51cc299a8ba01d2a7d2a26b146cedc08">getConnectionName</a> ()</td></tr>
<tr class="separator:a51cc299a8ba01d2a7d2a26b146cedc08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0155cc7f100de785220b81361e4d7021"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a0155cc7f100de785220b81361e4d7021">getConnectionEmail</a> ()</td></tr>
<tr class="separator:a0155cc7f100de785220b81361e4d7021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc340342b987e52cbb96ef4006566694"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#adc340342b987e52cbb96ef4006566694">getConnectionData</a> ()</td></tr>
<tr class="separator:adc340342b987e52cbb96ef4006566694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab646bdaf89b832246af303efae5a6a50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#ab646bdaf89b832246af303efae5a6a50">getConnectionTokens</a> ()</td></tr>
<tr class="separator:ab646bdaf89b832246af303efae5a6a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bda2ec75dd12b1b73510780f8ba9094"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a1bda2ec75dd12b1b73510780f8ba9094">getDisconnectUrl</a> ($sRedirect)</td></tr>
<tr class="separator:a1bda2ec75dd12b1b73510780f8ba9094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1139d2d575d13f24e509c97d31b6c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#abb1139d2d575d13f24e509c97d31b6c4">getConnectUrl</a> ($sRedirect, $sScope=null)</td></tr>
<tr class="separator:abb1139d2d575d13f24e509c97d31b6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5c8d50b9e3e9641aed1b8ddba69e17"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a9b5c8d50b9e3e9641aed1b8ddba69e17">isConnected</a> ()</td></tr>
<tr class="separator:a9b5c8d50b9e3e9641aed1b8ddba69e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40db3277b904ccd1685a86a17f2475b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a40db3277b904ccd1685a86a17f2475b2">disconnect</a> ()</td></tr>
<tr class="separator:a40db3277b904ccd1685a86a17f2475b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583fd17c4a06932ccf11eb79207aea0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_user_connection_provider.html#a583fd17c4a06932ccf11eb79207aea0f">connect</a> ()</td></tr>
<tr class="separator:a583fd17c4a06932ccf11eb79207aea0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a583fd17c4a06932ccf11eb79207aea0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::connect </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thid method should be called on the connect-redirect-page. It's meant to validate the last part of the connect-procedure.</p>
<dl class="section return"><dt>Returns</dt><dd>bool True when the procedure succesfylly completed. </dd></dl>

</div>
</div>
<a class="anchor" id="a40db3277b904ccd1685a86a17f2475b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::disconnect </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thid method should be called on the disconnect-redirect-page. It's meant to validate the last part of the disconnect-procedure.</p>
<dl class="section return"><dt>Returns</dt><dd>bool True when the procedure succesfylly completed. </dd></dl>

</div>
</div>
<a class="anchor" id="adc340342b987e52cbb96ef4006566694"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getConnectionData </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieve any userdata linked to the connection. This might also include the user-id. This data is connection-specific, and should not be relied upon outside of the connectionprovider. If no connection is found this method returns false.</p>
<dl class="section return"><dt>Returns</dt><dd>array|false The internal connection's user-data, or false when not connected. </dd></dl>

</div>
</div>
<a class="anchor" id="a0155cc7f100de785220b81361e4d7021"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getConnectionEmail </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieve the email-adress linked to the connection. If no connection is found this method returns false. Some connections may not provide this (ex: <a class="el" href="class_twitter.html">Twitter</a>)</p>
<dl class="section return"><dt>Returns</dt><dd>string|false The internal connection's username, or false when not connected, or not provided. </dd></dl>

</div>
</div>
<a class="anchor" id="ab1d2c9bb70f491f514b7c16c558f0777"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getConnectionId </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieve the user-id linked to the connection. If no connection is found this method returns false.</p>
<dl class="section return"><dt>Returns</dt><dd>int|false The internal connection's user-id, or false when not connected. </dd></dl>

</div>
</div>
<a class="anchor" id="a51cc299a8ba01d2a7d2a26b146cedc08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getConnectionName </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieve the username linked to the connection. If no connection is found this method returns false.</p>
<dl class="section return"><dt>Returns</dt><dd>string|false The internal connection's username, or false when not connected. </dd></dl>

</div>
</div>
<a class="anchor" id="ab646bdaf89b832246af303efae5a6a50"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getConnectionTokens </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieve the tokens required to make requests to the connection-provider on the user's behalve. This data is connection pecific and not guaranteed to exists or to stay valid outside the user's session. If no connection is found this method returns false.</p>
<dl class="section return"><dt>Returns</dt><dd>mixed|false The internal connection's user-tokens, or false when not connected. </dd></dl>

</div>
</div>
<a class="anchor" id="abb1139d2d575d13f24e509c97d31b6c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getConnectUrl </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sRedirect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sScope</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Since connectionproviders use an external system to verify the user's linkage to other sites every login procedure starts with a redirect. This method returns the url to create the connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sRedirect</td><td>A Fully qualified url to which the user will be redirected at the end of the procedure. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sScope</td><td>An optional list to pass on during authentication, identifying the required permission scope. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string|false A string with the correct url on succes, false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a1bda2ec75dd12b1b73510780f8ba9094"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getDisconnectUrl </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sRedirect</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Since connectionproviders use an external system to verify the user's linkage to other sites every login procedure starts with a redirect. This method returns the url to break the connection.</p>
<p>If a disconnect option is not part of the underlying provider, this method returns null;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sRedirect</td><td>A Fully qualified url to which the user will be redirected at the end of the procedure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string|false A string with the correct url on succes, false on failure, null if the operation is not possible. </dd></dl>

</div>
</div>
<a class="anchor" id="a44ddc4806292a57a3d46267f85fcb8b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::getName </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper method to identify the connectionprovider.</p>
<dl class="section return"><dt>Returns</dt><dd>string The name of the connection-provider-class. </dd></dl>

</div>
</div>
<a class="anchor" id="a9b5c8d50b9e3e9641aed1b8ddba69e17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::isConnected </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check if the underlying provider had a valid connection. Even when a connection is found, there is no guarantee it's connected to the logged-in user. When creating a connection, attention should be given to assure linkage to the correct user.</p>
<dl class="section return"><dt>Returns</dt><dd>bool True when connected, false when not connected. </dd></dl>

</div>
</div>
<a class="anchor" id="a8ba8b5a529e6f20c8b243368862120b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UserConnectionProvider::update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_user.html">User</a>&#160;</td>
          <td class="paramname"><em>$oUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bForceOverwrite</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update the userdata according to the current connection. This method is meant to update the userdata such:</p>
<ul>
<li>locale (if not set)</li>
<li>timezone (if not set)</li>
<li>birthday (if not set)</li>
<li>add email adresses</li>
</ul>
<p>This method can only be run when <a class="el" href="class_user_connection_provider.html#a9b5c8d50b9e3e9641aed1b8ddba69e17">isConnected()</a> returns true. And when <a class="el" href="class_user_connection_provider.html#adc340342b987e52cbb96ef4006566694">getConnectionData()</a> returns valid data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="class_user.html">User</a></td><td class="paramname">$oUser</td><td>The user to be updated. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$bForceOverwrite</td><td>Indicate if we should overwrite current settings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool Returns true when the update succeeded. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>D:/www/watena/libs/default/usermanager/um_userconnectionprovider.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2013 15:40:16 for Watena by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
